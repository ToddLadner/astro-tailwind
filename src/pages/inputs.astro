---
import Layout from '@layouts/Layout.astro';
import Checkable from '@components/Checkable.astro';
import Field from '@components/Field.astro';
import Switch from '@components/Switch.astro'

const emailError = 'Please enter a valid email address';

const { 
	title = "My Astro Blog",
	description = "My musings about the Astro framework",
	...rest 
} = Astro.props;
---

<Layout {title} {description}>
  <main class="p-inline-max p-lg bg-surface-2 stack">
    <p>Components</p>
    <h1>Inputs</h1>
    
    
   
      <Checkable 
        type="checkbox" 
        label="I agree to the terms and conditions" 
        required
      />
      
      <Checkable 
        type="radio" 
        label="I agree to the terms and conditions" 
        required
      />
      
      <Field 
        as="input" 
        type="email"
        id="email"    
        label="Email"
        icon="symbols-solid"      
        placeholder="you@example.com"
        required  
      />
      
      <Field 
        as="textarea" 
        id="message"  
        label="Message"  
        rows="4" 
      />
      
      <Field 
        as="select"   
        id="country"  
        label="Country"  
        options={[
          { value: '',    label: '–' },
          { value: '1',   label: 'Option 1' },
          { value: '2',   label: 'Option 2' },
        ]} 
      />

<Switch />

      <form id="signup-form" class="stack" novalidate>
        <Field as="input" id="username" name="username" label="Username" />
        <Field as="input" id="email"    name="email"    label="Email" type="email" />
        <button type="submit" class="button">Submit</button>
      </form>

    
  </main>
</Layout>

<script>
  import JustValidate from 'just-validate';

  const validation = new JustValidate('#signup-form', {
    errorFieldCssClass: 'is-invalid-field',
    errorLabelCssClass: 'is-invalid-label',
  });

  validation
    .addField('#username', [
      { rule: 'required',   errorMessage: 'Username is required' },
      { rule: 'minLength', value: 3, errorMessage: 'At least 3 characters' },
    ])
    .addField('#email', [
      { rule: 'required', errorMessage: 'Email is required' },
      { rule: 'email',    errorMessage: 'Enter a valid email' },
    ])
    .onSuccess((event) => {
      console.log('✅ validation passed');
      // event.preventDefault() if you want to do an AJAX submit
    });
</script>
